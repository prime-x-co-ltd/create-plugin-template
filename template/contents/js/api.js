(()=>{"use strict";var e={8894:function(e,t){var n=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function r(e){try{s(o.next(e))}catch(e){a(e)}}function p(e){try{s(o.throw(e))}catch(e){a(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,p)}s((o=o.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=t.saveCancel=t.valicateConfig=t.saveConfig=t.getFields=t.getApps=t.Utils=void 0;const o=kintone.app.getId();var i,a;!function(e){e.fieldSort=(t,n=[])=>(t.forEach((t=>{switch(t.type){case"ROW":t.fields.forEach((e=>{"SPACER"!==e.type&&"LABEL"!==e.type&&"HR"!==e.type&&n.push(e.code)}));break;case"GROUP":e.fieldSort(t.layout,n);break;case"SUBTABLE":t.fields.forEach((e=>n.push(e.code)))}})),n)}(i=t.Utils||(t.Utils={})),t.getApps=()=>new Promise(((e,t)=>{const n=(e=0,t)=>new Promise(((o,i)=>{kintone.api(kintone.api.url("/k/v1/apps",!0),"GET",{offset:e}).then((a=>{let r=a.apps.map((e=>({appId:e.appId,name:e.name})));if(t&&(r=[...r,...t]),100!==a.apps.length)return o(r);n(e+100,r).then((e=>o(e))).catch((e=>i(e)))})).catch((e=>i(e)))}));n().then((t=>e(t))).catch((e=>t(e)))})),t.getFields=()=>n(void 0,void 0,void 0,(function*(){return console.log(i.PLUGIN_ID),kintone.api(kintone.api.url("/k/v1/app/form/layout",!0),"GET",{app:o}).then((e=>{const t=i.fieldSort(e.layout);return kintone.api(kintone.api.url("/k/v1/app/form/fields",!0),"GET",{app:o}).then((e=>{const n=[];return t.forEach((t=>{t in e.properties&&n.push({label:e.properties[t].label,code:e.properties[t].code,type:e.properties[t].type})})),Promise.resolve(n)})).catch((e=>Promise.reject(e)))})).catch((e=>Promise.reject(e)))})),t.saveConfig=e=>{const t=JSON.stringify(e);console.log("Bytes:",new Blob([t]).size),kintone.plugin.app.setConfig({config:t})},t.valicateConfig=e=>{},t.saveCancel=()=>history.back(),t.getConfig=()=>{const e=kintone.plugin.app.getConfig(i.PLUGIN_ID);return JSON.parse(e.config)},a=kintone.$PLUGIN_ID,i.PLUGIN_ID=a}},t={};!function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{}};return e[o].call(i.exports,i,i.exports,n),i.exports}(8894)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZW1wbGF0ZS8uL3NyYy9jb25maWcva2ludG9uZUFQSS50cyIsIndlYnBhY2s6Ly90ZW1wbGF0ZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90ZW1wbGF0ZS93ZWJwYWNrL3N0YXJ0dXAiXSwibmFtZXMiOlsiX19hd2FpdGVyIiwidGhpcyIsInRoaXNBcmciLCJfYXJndW1lbnRzIiwiUCIsImdlbmVyYXRvciIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwiZnVsZmlsbGVkIiwidmFsdWUiLCJzdGVwIiwibmV4dCIsImUiLCJyZWplY3RlZCIsInJlc3VsdCIsImRvbmUiLCJ0aGVuIiwiYXBwbHkiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImV4cG9ydHMiLCJnZXRDb25maWciLCJzYXZlQ2FuY2VsIiwidmFsaWNhdGVDb25maWciLCJzYXZlQ29uZmlnIiwiZ2V0RmllbGRzIiwiZ2V0QXBwcyIsIlV0aWxzIiwiYXBwaWQiLCJraW50b25lIiwiYXBwIiwiZ2V0SWQiLCJQTFVHSU5fSUQiLCJmaWVsZFNvcnQiLCJsYXlvdXQiLCJjb2RlcyIsImZvckVhY2giLCJ2YWx1ZXMiLCJ0eXBlIiwiZmllbGRzIiwicHVzaCIsImNvZGUiLCJpbm5lckxvb3AiLCJvZmZzZXQiLCJfYXBwcyIsImFwaSIsInVybCIsInJlc3AiLCJhcHBzIiwibWFwIiwiYXBwSWQiLCJuYW1lIiwibGVuZ3RoIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwic29ydGVkIiwiZmllbGQiLCJwcm9wZXJ0aWVzIiwibGFiZWwiLCJzdGF0ZSIsImNvbmZpZyIsIkpTT04iLCJzdHJpbmdpZnkiLCJCbG9iIiwic2l6ZSIsInBsdWdpbiIsInNldENvbmZpZyIsImhpc3RvcnkiLCJiYWNrIiwicGFyc2UiLCIkUExVR0lOX0lEIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwibW9kdWxlIiwi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IHN0cmljdFwiO1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XG5leHBvcnRzLmdldENvbmZpZyA9IGV4cG9ydHMuc2F2ZUNhbmNlbCA9IGV4cG9ydHMudmFsaWNhdGVDb25maWcgPSBleHBvcnRzLnNhdmVDb25maWcgPSBleHBvcnRzLmdldEZpZWxkcyA9IGV4cG9ydHMuZ2V0QXBwcyA9IGV4cG9ydHMuVXRpbHMgPSB2b2lkIDA7XG5jb25zdCBhcHBpZCA9IGtpbnRvbmUuYXBwLmdldElkKCk7XG4vKipVdGlscyB8IG5hbWVzcGFjZeOBr+mdnuaOqOWlqOOBp+OBme+8iOS9v+OBhOOBn+OBi+OBo+OBn+OBoOOBke+8iSAqL1xudmFyIFV0aWxzO1xuKGZ1bmN0aW9uIChVdGlscykge1xuICAgIFV0aWxzLmZpZWxkU29ydCA9IChsYXlvdXQsIGNvZGVzID0gW10pID0+IHtcbiAgICAgICAgbGF5b3V0LmZvckVhY2goKHZhbHVlcykgPT4ge1xuICAgICAgICAgICAgc3dpdGNoICh2YWx1ZXMudHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ1JPVyc6XG4gICAgICAgICAgICAgICAgICAgIHZhbHVlcy5maWVsZHMuZm9yRWFjaCgodmFsdWUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZS50eXBlICE9PSAnU1BBQ0VSJyAmJiB2YWx1ZS50eXBlICE9PSAnTEFCRUwnICYmIHZhbHVlLnR5cGUgIT09ICdIUicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZXMucHVzaCh2YWx1ZS5jb2RlKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ0dST1VQJzpcbiAgICAgICAgICAgICAgICAgICAgVXRpbHMuZmllbGRTb3J0KHZhbHVlcy5sYXlvdXQsIGNvZGVzKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnU1VCVEFCTEUnOlxuICAgICAgICAgICAgICAgICAgICB2YWx1ZXMuZmllbGRzLmZvckVhY2goKHZhbHVlKSA9PiBjb2Rlcy5wdXNoKHZhbHVlLmNvZGUpKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gY29kZXM7XG4gICAgfTtcbn0pKFV0aWxzID0gZXhwb3J0cy5VdGlscyB8fCAoZXhwb3J0cy5VdGlscyA9IHt9KSk7XG5jb25zdCBnZXRBcHBzID0gKCkgPT4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IGlubmVyTG9vcCA9IChvZmZzZXQgPSAwLCBfYXBwcykgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICAgICAgICBraW50b25lXG4gICAgICAgICAgICAgICAgICAgIC5hcGkoa2ludG9uZS5hcGkudXJsKCcvay92MS9hcHBzJywgdHJ1ZSksICdHRVQnLCB7IG9mZnNldDogb2Zmc2V0IH0pXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBhcHBzID0gcmVzcC5hcHBzLm1hcCgoYXBwKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcElkOiBhcHAuYXBwSWQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogYXBwLm5hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKF9hcHBzKVxuICAgICAgICAgICAgICAgICAgICAgICAgYXBwcyA9IFsuLi5hcHBzLCAuLi5fYXBwc107XG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNwLmFwcHMubGVuZ3RoID09PSAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlubmVyTG9vcChvZmZzZXQgKyAxMDAsIGFwcHMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGFwcHMpID0+IHJlc29sdmUoYXBwcykpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHJlamVjdChlcnIpKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXNvbHZlKGFwcHMpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHJlamVjdChlcnIpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBpbm5lckxvb3AoKVxuICAgICAgICAgICAgLnRoZW4oKHJlc3ApID0+IHJlc29sdmUocmVzcCkpXG4gICAgICAgICAgICAuY2F0Y2goKGVycikgPT4gcmVqZWN0KGVycikpO1xuICAgIH0pO1xufTtcbmV4cG9ydHMuZ2V0QXBwcyA9IGdldEFwcHM7XG5jb25zdCBnZXRGaWVsZHMgPSAoKSA9PiBfX2F3YWl0ZXIodm9pZCAwLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24qICgpIHtcbiAgICBjb25zb2xlLmxvZyhVdGlscy5QTFVHSU5fSUQpO1xuICAgIHJldHVybiBraW50b25lXG4gICAgICAgIC5hcGkoa2ludG9uZS5hcGkudXJsKCcvay92MS9hcHAvZm9ybS9sYXlvdXQnLCB0cnVlKSwgJ0dFVCcsIHtcbiAgICAgICAgYXBwOiBhcHBpZCxcbiAgICB9KVxuICAgICAgICAudGhlbigocmVzcCkgPT4ge1xuICAgICAgICBjb25zdCBzb3J0ZWQgPSBVdGlscy5maWVsZFNvcnQocmVzcC5sYXlvdXQpO1xuICAgICAgICByZXR1cm4ga2ludG9uZVxuICAgICAgICAgICAgLmFwaShraW50b25lLmFwaS51cmwoJy9rL3YxL2FwcC9mb3JtL2ZpZWxkcycsIHRydWUpLCAnR0VUJywge1xuICAgICAgICAgICAgYXBwOiBhcHBpZCxcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC50aGVuKChyZXNwKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBmaWVsZHMgPSBbXTtcbiAgICAgICAgICAgIHNvcnRlZC5mb3JFYWNoKChmaWVsZCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChmaWVsZCBpbiByZXNwLnByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGRzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWw6IHJlc3AucHJvcGVydGllc1tmaWVsZF0ubGFiZWwsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlOiByZXNwLnByb3BlcnRpZXNbZmllbGRdLmNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiByZXNwLnByb3BlcnRpZXNbZmllbGRdLnR5cGUsXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmaWVsZHMpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IFByb21pc2UucmVqZWN0KGVycikpO1xuICAgIH0pXG4gICAgICAgIC5jYXRjaCgoZXJyKSA9PiBQcm9taXNlLnJlamVjdChlcnIpKTtcbn0pO1xuZXhwb3J0cy5nZXRGaWVsZHMgPSBnZXRGaWVsZHM7XG5jb25zdCBzYXZlQ29uZmlnID0gKHN0YXRlKSA9PiB7XG4gICAgLy8gY29uZmln44Gva2V5OnZhbHVl44GY44KD44Gq44GE44Go44OA44OhXG4gICAgY29uc3QgY29uZmlnID0gSlNPTi5zdHJpbmdpZnkoc3RhdGUpO1xuICAgIGNvbnNvbGUubG9nKCdCeXRlczonLCBuZXcgQmxvYihbY29uZmlnXSkuc2l6ZSk7XG4gICAga2ludG9uZS5wbHVnaW4uYXBwLnNldENvbmZpZyh7IGNvbmZpZzogY29uZmlnIH0pO1xuICAgIHJldHVybjtcbn07XG5leHBvcnRzLnNhdmVDb25maWcgPSBzYXZlQ29uZmlnO1xuY29uc3QgdmFsaWNhdGVDb25maWcgPSAoc3RhdGUpID0+IHtcbiAgICByZXR1cm47XG59O1xuZXhwb3J0cy52YWxpY2F0ZUNvbmZpZyA9IHZhbGljYXRlQ29uZmlnO1xuY29uc3Qgc2F2ZUNhbmNlbCA9ICgpID0+IGhpc3RvcnkuYmFjaygpO1xuZXhwb3J0cy5zYXZlQ2FuY2VsID0gc2F2ZUNhbmNlbDtcbmNvbnN0IGdldENvbmZpZyA9ICgpID0+IHtcbiAgICBjb25zdCBjb25maWcgPSBraW50b25lLnBsdWdpbi5hcHAuZ2V0Q29uZmlnKFV0aWxzLlBMVUdJTl9JRCk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoY29uZmlnLmNvbmZpZyk7XG59O1xuZXhwb3J0cy5nZXRDb25maWcgPSBnZXRDb25maWc7XG4oKFBMVUdJTl9JRCkgPT4ge1xuICAgIFV0aWxzLlBMVUdJTl9JRCA9IFBMVUdJTl9JRDtcbiAgICByZXR1cm47XG59KShraW50b25lLiRQTFVHSU5fSUQpO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9ZGF0YTphcHBsaWNhdGlvbi9qc29uO2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKbWFXeGxJam9pYTJsdWRHOXVaVUZRU1M1cWN5SXNJbk52ZFhKalpWSnZiM1FpT2lJaUxDSnpiM1Z5WTJWeklqcGJJbXRwYm5SdmJtVkJVRWt1ZEhNaVhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWpzN096czdPenM3T3pzN08wRkJTVUVzVFVGQlRTeExRVUZMTEVkQlFVY3NUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhMUVVGTExFVkJRVVVzUTBGQlFUdEJRVVZxUXl4MVEwRkJkVU03UVVGRGRrTXNTVUZCYVVJc1MwRkJTeXhEUVRCQ2NrSTdRVUV4UWtRc1YwRkJhVUlzUzBGQlN6dEpRVTlTTEdWQlFWTXNSMEZCWXl4RFFVRkRMRTFCUVUwc1JVRkJSU3hMUVVGTExFZEJRVWNzUlVGQlJTeEZRVUZGTEVWQlFVVTdVVUZETVVRc1RVRkJUU3hEUVVGRExFOUJRVThzUTBGQlF5eERRVUZETEUxQlFVMHNSVUZCUlN4RlFVRkZPMWxCUTNwQ0xGRkJRVkVzVFVGQlRTeERRVUZETEVsQlFVa3NSVUZCUlR0blFrRkRjRUlzUzBGQlN5eExRVUZMTzI5Q1FVTlVMRTFCUVUwc1EwRkJReXhOUVVGTkxFTkJRVU1zVDBGQlR5eERRVUZETEVOQlFVTXNTMEZCU3l4RlFVRkZMRVZCUVVVN2QwSkJReTlDTEVsQlFVa3NTMEZCU3l4RFFVRkRMRWxCUVVrc1MwRkJTeXhSUVVGUkxFbEJRVWtzUzBGQlN5eERRVUZETEVsQlFVa3NTMEZCU3l4UFFVRlBMRWxCUVVrc1MwRkJTeXhEUVVGRExFbEJRVWtzUzBGQlN5eEpRVUZKT3pSQ1FVTXpSU3hMUVVGTExFTkJRVU1zU1VGQlNTeERRVUZETEV0QlFVc3NRMEZCUXl4SlFVRkpMRU5CUVVNc1EwRkJRVHR2UWtGRGVFSXNRMEZCUXl4RFFVRkRMRU5CUVVFN2IwSkJRMFlzVFVGQlN6dG5Ra0ZEVGl4TFFVRkxMRTlCUVU4N2IwSkJRMWdzUzBGQlN5eERRVUZETEZOQlFWTXNRMEZCUXl4TlFVRk5MRU5CUVVNc1RVRkJUU3hGUVVGRkxFdEJRVXNzUTBGQlF5eERRVUZCTzI5Q1FVTnlReXhOUVVGTE8yZENRVU5PTEV0QlFVc3NWVUZCVlR0dlFrRkRaQ3hOUVVGTkxFTkJRVU1zVFVGQlRTeERRVUZETEU5QlFVOHNRMEZCUXl4RFFVRkRMRXRCUVVzc1JVRkJSU3hGUVVGRkxFTkJRVU1zUzBGQlN5eERRVUZETEVsQlFVa3NRMEZCUXl4TFFVRkxMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVU1zUTBGQlFUdHZRa0ZEZUVRc1RVRkJTenRoUVVOT08xRkJRMFlzUTBGQlF5eERRVUZETEVOQlFVRTdVVUZEUml4UFFVRlBMRXRCUVVzc1EwRkJRVHRKUVVOaUxFTkJRVU1zUTBGQlFUdEJRVU5HTEVOQlFVTXNSVUV4UW1kQ0xFdEJRVXNzUjBGQlRDeGhRVUZMTEV0QlFVd3NZVUZCU3l4UlFUQkNja0k3UVVGalRTeE5RVUZOTEU5QlFVOHNSMEZCV1N4SFFVRkhMRVZCUVVVN1NVRkRjRU1zVDBGQlR5eEpRVUZKTEU5QlFVOHNRMEZCUXl4RFFVRkRMRTlCUVU4c1JVRkJSU3hOUVVGTkxFVkJRVVVzUlVGQlJUdFJRVU4wUXl4TlFVRk5MRk5CUVZNc1IwRkJZeXhEUVVGRExFMUJRVTBzUjBGQlJ5eERRVUZETEVWQlFVVXNTMEZCU3l4RlFVRkZMRVZCUVVVN1dVRkRiRVFzVDBGQlR5eEpRVUZKTEU5QlFVOHNRMEZCUXl4RFFVRkRMRTlCUVU4c1JVRkJSU3hOUVVGTkxFVkJRVVVzUlVGQlJUdG5Ra0ZEZEVNc1QwRkJUenR4UWtGRFRDeEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zV1VGQldTeEZRVUZGTEVsQlFVa3NRMEZCUXl4RlFVRkZMRXRCUVVzc1JVRkJSU3hGUVVGRkxFMUJRVTBzUlVGQlJTeE5RVUZOTEVWQlFVVXNRMEZCUXp0eFFrRkRia1VzU1VGQlNTeERRVUZETEVOQlFVTXNTVUZCU1N4RlFVRkZMRVZCUVVVN2IwSkJRMlFzU1VGQlNTeEpRVUZKTEVkQlFXTXNTVUZCU1N4RFFVRkRMRWxCUVVrc1EwRkJReXhIUVVGSExFTkJRVU1zUTBGQlF5eEhRVUZSTEVWQlFVVXNSVUZCUlR0M1FrRkRhRVFzVDBGQlR6czBRa0ZEVGl4TFFVRkxMRVZCUVVVc1IwRkJSeXhEUVVGRExFdEJRVXM3TkVKQlEyaENMRWxCUVVrc1JVRkJSU3hIUVVGSExFTkJRVU1zU1VGQlNUdDVRa0ZEWkN4RFFVRkJPMjlDUVVOR0xFTkJRVU1zUTBGQlF5eERRVUZCTzI5Q1FVTkdMRWxCUVVrc1MwRkJTenQzUWtGQlJTeEpRVUZKTEVkQlFVY3NRMEZCUXl4SFFVRkhMRWxCUVVrc1JVRkJSU3hIUVVGSExFdEJRVXNzUTBGQlF5eERRVUZCTzI5Q1FVTnlReXhKUVVGSkxFbEJRVWtzUTBGQlF5eEpRVUZKTEVOQlFVTXNUVUZCVFN4TFFVRkxMRWRCUVVjc1JVRkJSVHQzUWtGRE4wSXNVMEZCVXl4RFFVRkRMRTFCUVUwc1IwRkJSeXhIUVVGSExFVkJRVVVzU1VGQlNTeERRVUZET3paQ1FVTXpRaXhKUVVGSkxFTkJRVU1zUTBGQlF5eEpRVUZKTEVWQlFVVXNSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFTkJRVU1zUTBGQlF6czJRa0ZETjBJc1MwRkJTeXhEUVVGRExFTkJRVU1zUjBGQlJ5eEZRVUZGTEVWQlFVVXNRMEZCUXl4TlFVRk5MRU5CUVVNc1IwRkJSeXhEUVVGRExFTkJRVU1zUTBGQlFUdHhRa0ZETjBJN2VVSkJRVTA3ZDBKQlEwNHNUMEZCVHl4UFFVRlBMRU5CUVVNc1NVRkJTU3hEUVVGRExFTkJRVUU3Y1VKQlEzQkNPMmRDUVVOR0xFTkJRVU1zUTBGQlF6dHhRa0ZEUkN4TFFVRkxMRU5CUVVNc1EwRkJReXhIUVVGSExFVkJRVVVzUlVGQlJTeERRVUZETEUxQlFVMHNRMEZCUXl4SFFVRkhMRU5CUVVNc1EwRkJReXhEUVVGQk8xbEJRemxDTEVOQlFVTXNRMEZCUXl4RFFVRkJPMUZCUTBnc1EwRkJReXhEUVVGQk8xRkJRMFFzVTBGQlV5eEZRVUZGTzJGQlExUXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hGUVVGRkxFVkJRVVVzUTBGQlF5eFBRVUZQTEVOQlFVTXNTVUZCU1N4RFFVRkRMRU5CUVVNN1lVRkROMElzUzBGQlN5eERRVUZETEVOQlFVTXNSMEZCUnl4RlFVRkZMRVZCUVVVc1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETEVOQlFVTXNRMEZCUVR0SlFVTTVRaXhEUVVGRExFTkJRVU1zUTBGQlFUdEJRVU5JTEVOQlFVTXNRMEZCUVR0QlFUZENXU3hSUVVGQkxFOUJRVThzVjBFMlFtNUNPMEZCV1Uwc1RVRkJUU3hUUVVGVExFZEJRV01zUjBGQlV5eEZRVUZGTzBsQlF6bERMRTlCUVU4c1EwRkJReXhIUVVGSExFTkJRVU1zUzBGQlN5eERRVUZETEZOQlFWTXNRMEZCUXl4RFFVRkJPMGxCUXpWQ0xFOUJRVThzVDBGQlR6dFRRVU5hTEVkQlFVY3NRMEZCUXl4UFFVRlBMRU5CUVVNc1IwRkJSeXhEUVVGRExFZEJRVWNzUTBGQlF5eDFRa0ZCZFVJc1JVRkJSU3hKUVVGSkxFTkJRVU1zUlVGQlJTeExRVUZMTEVWQlFVVTdVVUZETTBRc1IwRkJSeXhGUVVGRkxFdEJRVXM3UzBGRFZpeERRVUZETzFOQlEwUXNTVUZCU1N4RFFVRkRMRU5CUVVNc1NVRkJTU3hGUVVGRkxFVkJRVVU3VVVGRFpDeE5RVUZOTEUxQlFVMHNSMEZCUnl4TFFVRkxMRU5CUVVNc1UwRkJVeXhEUVVGRExFbEJRVWtzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUVR0UlFVTXpReXhQUVVGUExFOUJRVTg3WVVGRFdpeEhRVUZITEVOQlFVTXNUMEZCVHl4RFFVRkRMRWRCUVVjc1EwRkJReXhIUVVGSExFTkJRVU1zZFVKQlFYVkNMRVZCUVVVc1NVRkJTU3hEUVVGRExFVkJRVVVzUzBGQlN5eEZRVUZGTzFsQlF6TkVMRWRCUVVjc1JVRkJSU3hMUVVGTE8xTkJRMVlzUTBGQlF6dGhRVU5FTEVsQlFVa3NRMEZCUXl4RFFVRkRMRWxCUVVrc1JVRkJSU3hGUVVGRk8xbEJRMlFzVFVGQlRTeE5RVUZOTEVkQlFXZENMRVZCUVVVc1EwRkJRVHRaUVVNNVFpeE5RVUZOTEVOQlFVTXNUMEZCVHl4RFFVRkRMRU5CUVVNc1MwRkJTeXhGUVVGRkxFVkJRVVU3WjBKQlEzaENMRWxCUVVrc1MwRkJTeXhKUVVGSkxFbEJRVWtzUTBGQlF5eFZRVUZWTEVWQlFVVTdiMEpCUXpkQ0xFMUJRVTBzUTBGQlF5eEpRVUZKTEVOQlFVTTdkMEpCUTFnc1MwRkJTeXhGUVVGRkxFbEJRVWtzUTBGQlF5eFZRVUZWTEVOQlFVTXNTMEZCU3l4RFFVRkRMRU5CUVVNc1MwRkJTenQzUWtGRGJrTXNTVUZCU1N4RlFVRkZMRWxCUVVrc1EwRkJReXhWUVVGVkxFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVTXNTVUZCU1R0M1FrRkRha01zU1VGQlNTeEZRVUZGTEVsQlFVa3NRMEZCUXl4VlFVRlZMRU5CUVVNc1MwRkJTeXhEUVVGRExFTkJRVU1zU1VGQlNUdHhRa0ZEYWtNc1EwRkJReXhEUVVGQk8ybENRVU5HTzFsQlEwWXNRMEZCUXl4RFFVRkRMRU5CUVVFN1dVRkRSaXhQUVVGUExFOUJRVThzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRU5CUVVFN1VVRkRMMElzUTBGQlF5eERRVUZETzJGQlEwUXNTMEZCU3l4RFFVRkRMRU5CUVVNc1IwRkJSeXhGUVVGRkxFVkJRVVVzUTBGQlF5eFBRVUZQTEVOQlFVTXNUVUZCVFN4RFFVRkRMRWRCUVVjc1EwRkJReXhEUVVGRExFTkJRVUU3U1VGRGRFTXNRMEZCUXl4RFFVRkRPMU5CUTBRc1MwRkJTeXhEUVVGRExFTkJRVU1zUjBGQlJ5eEZRVUZGTEVWQlFVVXNRMEZCUXl4UFFVRlBMRU5CUVVNc1RVRkJUU3hEUVVGRExFZEJRVWNzUTBGQlF5eERRVUZETEVOQlFVRTdRVUZEZEVNc1EwRkJReXhEUVVGQkxFTkJRVUU3UVVFMVFsa3NVVUZCUVN4VFFVRlRMR0ZCTkVKeVFqdEJRVXROTEUxQlFVMHNWVUZCVlN4SFFVRmxMRU5CUVVNc1MwRkJTeXhGUVVGRkxFVkJRVVU3U1VGREwwTXNNRUpCUVRCQ08wbEJRekZDTEUxQlFVMHNUVUZCVFN4SFFVRkhMRWxCUVVrc1EwRkJReXhUUVVGVExFTkJRVU1zUzBGQlN5eERRVUZETEVOQlFVRTdTVUZEY0VNc1QwRkJUeXhEUVVGRExFZEJRVWNzUTBGQlF5eFJRVUZSTEVWQlFVVXNTVUZCU1N4SlFVRkpMRU5CUVVNc1EwRkJReXhOUVVGTkxFTkJRVU1zUTBGQlF5eERRVUZETEVsQlFVa3NRMEZCUXl4RFFVRkJPMGxCUXpsRExFOUJRVThzUTBGQlF5eE5RVUZOTEVOQlFVTXNSMEZCUnl4RFFVRkRMRk5CUVZNc1EwRkJReXhGUVVGRkxFMUJRVTBzUlVGQlJTeE5RVUZOTEVWQlFVVXNRMEZCUXl4RFFVRkJPMGxCUTJoRUxFOUJRVTA3UVVGRFVDeERRVUZETEVOQlFVRTdRVUZPV1N4UlFVRkJMRlZCUVZVc1kwRk5kRUk3UVVGTFRTeE5RVUZOTEdOQlFXTXNSMEZCYlVJc1EwRkJReXhMUVVGTExFVkJRVVVzUlVGQlJUdEpRVU4yUkN4UFFVRk5PMEZCUTFBc1EwRkJReXhEUVVGQk8wRkJSbGtzVVVGQlFTeGpRVUZqTEd0Q1FVVXhRanRCUVUxTkxFMUJRVTBzVlVGQlZTeEhRVUZsTEVkQlFVY3NSVUZCUlN4RFFVRkRMRTlCUVU4c1EwRkJReXhKUVVGSkxFVkJRVVVzUTBGQlFUdEJRVUUzUXl4UlFVRkJMRlZCUVZVc1kwRkJiVU03UVVGTmJrUXNUVUZCVFN4VFFVRlRMRWRCUVdNc1IwRkJSeXhGUVVGRk8wbEJRM2hETEUxQlFVMHNUVUZCVFN4SFFVRkhMRTlCUVU4c1EwRkJReXhOUVVGTkxFTkJRVU1zUjBGQlJ5eERRVUZETEZOQlFWTXNRMEZCUXl4TFFVRkxMRU5CUVVNc1UwRkJVeXhEUVVGRExFTkJRVUU3U1VGRE5VUXNUMEZCVHl4SlFVRkpMRU5CUVVNc1MwRkJTeXhEUVVGRExFMUJRVTBzUTBGQlF5eE5RVUZOTEVOQlFVTXNRMEZCUVR0QlFVTnFReXhEUVVGRExFTkJSMEU3UVVGT1dTeFJRVUZCTEZOQlFWTXNZVUZOY2tJN1FVRkJRU3hEUVVGRExFTkJRVU1zVTBGQlV5eEZRVUZSTEVWQlFVVTdTVUZEY2tJc1MwRkJTeXhEUVVGRExGTkJRVk1zUjBGQlJ5eFRRVUZUTEVOQlFVRTdTVUZETTBJc1QwRkJUVHRCUVVOUUxFTkJRVU1zUTBGQlF5eERRVUZETEU5QlFVOHNRMEZCUXl4VlFVRlZMRU5CUVVNc1EwRkJRU0o5IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0aWYoX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSkge1xuXHRcdHJldHVybiBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBzdGFydHVwXG4vLyBMb2FkIGVudHJ5IG1vZHVsZVxuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbl9fd2VicGFja19yZXF1aXJlX18oODg5NCk7XG4iXSwic291cmNlUm9vdCI6IiJ9