{"version":3,"file":"api.js","sources":["webpack://template/./src/config/kintoneAPI.ts","webpack://template/webpack/bootstrap","webpack://template/webpack/startup"],"sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.saveConfig = exports.getFields = exports.getApps = exports.Utils = void 0;\nconst appid = kintone.app.getId();\n/**Utils | namespaceは非推奨です（使いたかっただけ） */\nvar Utils;\n(function (Utils) {\n    Utils.fieldSort = (layout, codes = []) => {\n        layout.forEach((values) => {\n            switch (values.type) {\n                case 'ROW':\n                    values.fields.forEach((value) => {\n                        if (value.type !== 'SPACER' && value.type !== 'LABEL' && value.type !== 'HR')\n                            codes.push(value.code);\n                    });\n                    break;\n                case 'GROUP':\n                    Utils.fieldSort(values.layout, codes);\n                    break;\n                case 'SUBTABLE':\n                    values.fields.forEach((value) => codes.push(value.code));\n                    break;\n            }\n        });\n        return codes;\n    };\n})(Utils = exports.Utils || (exports.Utils = {}));\nconst getApps = () => {\n    return new Promise((resolve, reject) => {\n        const innerLoop = (offset = 0, _apps) => {\n            return new Promise((resolve, reject) => {\n                kintone\n                    .api(kintone.api.url('/k/v1/apps', true), 'GET', { offset: offset })\n                    .then((resp) => {\n                    let apps = resp.apps.map((app) => {\n                        return {\n                            appId: app.appId,\n                            name: app.name,\n                        };\n                    });\n                    if (_apps)\n                        apps = [...apps, ..._apps];\n                    if (resp.apps.length === 100) {\n                        innerLoop(offset + 100, apps)\n                            .then((apps) => resolve(apps))\n                            .catch((err) => reject(err));\n                    }\n                    else {\n                        return resolve(apps);\n                    }\n                })\n                    .catch((err) => reject(err));\n            });\n        };\n        innerLoop()\n            .then((resp) => resolve(resp))\n            .catch((err) => reject(err));\n    });\n};\nexports.getApps = getApps;\nconst getFields = () => __awaiter(void 0, void 0, void 0, function* () {\n    console.log(Utils.PLUGIN_ID);\n    return kintone\n        .api(kintone.api.url('/k/v1/app/form/layout', true), 'GET', {\n        app: appid,\n    })\n        .then((resp) => {\n        const sorted = Utils.fieldSort(resp.layout);\n        return kintone\n            .api(kintone.api.url('/k/v1/app/form/fields', true), 'GET', {\n            app: appid,\n        })\n            .then((resp) => {\n            const fields = [];\n            sorted.forEach((field) => {\n                if (field in resp.properties) {\n                    fields.push({\n                        label: resp.properties[field].label,\n                        code: resp.properties[field].code,\n                        type: resp.properties[field].type,\n                    });\n                }\n            });\n            return Promise.resolve(fields);\n        })\n            .catch((err) => Promise.reject(err));\n    })\n        .catch((err) => Promise.reject(err));\n});\nexports.getFields = getFields;\nconst saveConfig = (state) => {\n    console.log(state);\n    const config = {\n        name: 'Tom',\n        age: 25,\n    };\n    kintone.plugin.app.setConfig(config);\n    return;\n};\nexports.saveConfig = saveConfig;\n((PLUGIN_ID) => {\n    Utils.PLUGIN_ID = PLUGIN_ID;\n    return;\n})(kintone.$PLUGIN_ID);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia2ludG9uZUFQSS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImtpbnRvbmVBUEkudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBSUEsTUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLEVBQUUsQ0FBQTtBQUVqQyx1Q0FBdUM7QUFDdkMsSUFBaUIsS0FBSyxDQTBCckI7QUExQkQsV0FBaUIsS0FBSztJQU9SLGVBQVMsR0FBYyxDQUFDLE1BQU0sRUFBRSxLQUFLLEdBQUcsRUFBRSxFQUFFLEVBQUU7UUFDMUQsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQ3pCLFFBQVEsTUFBTSxDQUFDLElBQUksRUFBRTtnQkFDcEIsS0FBSyxLQUFLO29CQUNULE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7d0JBQy9CLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxRQUFRLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxPQUFPLElBQUksS0FBSyxDQUFDLElBQUksS0FBSyxJQUFJOzRCQUMzRSxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQTtvQkFDeEIsQ0FBQyxDQUFDLENBQUE7b0JBQ0YsTUFBSztnQkFDTixLQUFLLE9BQU87b0JBQ1gsS0FBSyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLEtBQUssQ0FBQyxDQUFBO29CQUNyQyxNQUFLO2dCQUNOLEtBQUssVUFBVTtvQkFDZCxNQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQTtvQkFDeEQsTUFBSzthQUNOO1FBQ0YsQ0FBQyxDQUFDLENBQUE7UUFDRixPQUFPLEtBQUssQ0FBQTtJQUNiLENBQUMsQ0FBQTtB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","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tif(__webpack_module_cache__[moduleId]) {\n\t\treturn __webpack_module_cache__[moduleId].exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// startup\n// Load entry module\n// This entry module is referenced by other modules so it can't be inlined\n__webpack_require__(\"./src/config/kintoneAPI.ts\");\n"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;A;;;;AClHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;ACtBA;AACA;AACA;AACA;;A","sourceRoot":""}